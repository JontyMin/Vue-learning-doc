<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>购物车案例</title>
		<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<style type="text/css">
			
		</style>
	</head>
	<body>
		<div id="app" class="container">
			<div v-if="books.length">
				<table border="1" cellspacing="" cellpadding="" class="table table-striped">
					<thead>
						<tr>
							<th>编号</th>
							<th>书籍名称</th>
							<th>出版日期</th>
							<th>价格</th>
							<th>购买数量</th>
							<th>操作</th>
						</tr>
					</thead>
					<tbody>
						<tr v-for="(item,index) in books">
							<td>{{item.id}}</td>
							<td>{{item.name}}</td>
							<td>{{item.date}}</td>
							<td>{{item.price | showPrice}}</td>
							<td>
								<button class="btn" @click="decrement(item)" :disabled="item.count<= 1">-</button> 
								{{item.count}} 
								<button class="btn" @click="increment(item)">+</button>
							</td>
							<td><button type="button" class="btn-info" @click="removeHandel(index)">移除</button></td>
						</tr>
					</tbody>
					<tfoot>
						
					</tfoot>
				</table>
				<h3>总价格：{{sumPrice | showPrice}}</h3>
			</div>
			<h2 v-else>购物车为空</h2>
		</div>
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
		<script type="text/javascript">
			const app = new Vue({
				el:'#app',
				data:{
					books:[
						{
							id:1,
							name:'《数据结构与算法》',
							date:'2001-6',
							price:67.00,
							count:1
						},
						{
							id:2,
							name:'《大话设计模式》',
							date:'2002-6',
							price:91.00,
							count:1
						},
						{
							id:3,
							name:'《编程珠玑》',
							date:'2008-6',
							price:18.00,
							count:1
						},
						
					]
				},
				methods:{
					increment(item){
						item.count++
					},
					decrement(item){
						item.count--
					},
					removeHandel(index){
						this.books.splice(index,1)
					}
					
				},
				computed:{
					sumPrice(){
						let sumPrice=0
						for(let i=0;i<this.books.length;i++){
							sumPrice+=this.books[i].price*this.books[i].count
						}
						return sumPrice
					}
				},
				filters:{
					// 价格过滤器
					showPrice(price){
						return '￥'+price.toFixed(2)
					}
				}
			})
		</script>
	</body>
</html>
